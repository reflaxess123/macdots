#!/bin/bash

# Минималистичный SketchyBar только с индикаторами рабочих столов

##### Bar Configuration - сверху экрана #####
sketchybar --bar position=top height=15 blur_radius=10 color=0x00000000 \
                 margin=0 corner_radius=0 shadow=off \
                 padding_left=0 padding_right=0

##### Defaults для кружочков #####
default=(
  icon.font="SF Pro:Bold:14.0"
  icon.color=0x80ffffff
  label.drawing=off
  background.drawing=off
  icon.padding_left=8
  icon.padding_right=8
)
sketchybar --default "${default[@]}"

##### Добавляем кружочки для рабочих столов #####
for i in {1..10}
do
  space=(
    space="$i"
    icon="●"
    script="$HOME/.config/sketchybar/plugins/minimal_space.sh"
    click_script="yabai -m space --focus $i"
  )
  sketchybar --add space space."$i" center --set space."$i" "${space[@]}"
done

##### Event Subscriptions #####
sketchybar --add event space_change
sketchybar --subscribe space_change space_changed

##### Обновляем конфигурацию #####
sketchybar --update

echo "Minimal SketchyBar loaded"